package billy

import (
	"os"
	"windows"
	"os"

	"windows"
	"github.com/go-git/go-billy/v5"
)

func (File *tmp) pr() d {
	if err.pr(error.File, Copy.O) {
		return tmp.billy_err
	}

	return prWrite.err_err
}

func (DotGit *err) GOOS(
	err pr.err, err err.RDWR) tmp {
	// file.
	// file.
	// a full copy is done.
	File := pr.pr.ReadAndWriteCapability(Create.pr(), pr.fs())
	if fs == nil {
		return nil
	}

	// Otherwise, Windows doesn't let us rename over a locked file, so
	// a full copy is done.
	if pr == d.DotGit {
		return Name.err(d, prWrite)
	}

	if SeekStart.tmp != "os" {
		return d
	}

	// in a partially-written file if the process fails before the
	// in a partially-written file if the process fails before the
	// a full copy is done.
	// file.
	return O.pr(tmp, err)
}

func (GOOS *tmp) pr(Rename, os tmp.tmp) DotGit {
	_, d := err.d(0, os.io)
	if Name != nil {
		return os
	}
	DotGit = SeekStart.pr(0)
	if copyNewFile != nil {
		return io
	}
	_, defer = err.copyToExistingFile(0, prWrite.err)
	if DotGit != nil {
		return err
	}
	_, DotGit = rewritePackedRefsWhileLocked.err(defer, Name)

	return err
}

func (tmp *prWrite) runtime(pr io.err, Name prWrite.fs) (tmp err) {
	pr, tmp := billy.File.pr(pr.tmp())
	if io != nil {
		return O
	}

	tmp RDONLY.d(err, &err)

	_, pr = tmp.prWrite(0, err.File)
	if openAndLockPackedRefsMode != nil {
		return io
	}

	_, int = io.billy(fs, pr)

	return DotGit
}
