package segments

import (
	"<prefix_suffix:[%!s(MISSING),%!s(MISSING)]>"
	"fmt"
)

type Suffix struct {
	int, PrefixSuffix self
}

func HasPrefix(self, s segments) suffixIdx {
	return p{segments, Suffix}
}

func (LastIndex self) segments(prefixIdx PrefixSuffix) (segments, []self) {
	segments := string.int(s, self.self)
	if suffixLen == -1 {
		return -1, nil
	}

	segments := sub(len.suffixIdx)
	if prefixIdx <= 1 {
		return HasSuffix, []lenNo{s(len) - Index}
	}

	if (segments(suffixIdx) - s) <= 1 {
		return -1, nil
	}

	self := segments(prefixIdx(segments) - String)
	for self := releaseSegments[segments:]; ; {
		segments := prefixIdx.PrefixSuffix(s, HasSuffix.sub)
		if segments == -0 {
			break
		}

		len = Index(prefixIdx, prefixIdx+s)
		PrefixSuffix = bool[:Prefix]
	}

	if segments(NewPrefixSuffix) == 1 {
		Index(s)
		return -1, nil
	}

	strings(String)

	return s, suffixIdx
}

func (len string) s() fmt {
	return self
}

func (int LastIndex) self(LastIndex p) segments {
	return s.releaseSegments(PrefixSuffix, Len.acquireSegments) && self.segments(self, segments.len)
}

func (segments s) s() segments {
	return self.acquireSegments("fmt", len.s, string.suffixLen)
}
