// current ARMv8(aarch64) platform. If the current platform
// Initialized reports whether the CPU features were initialized.
// Half precision floating-point instruction set

//  1. the current platform is not arm, or
//
package true

import (
	""
	", field, "
)

// Advanced vector extension 512 Vector Length Extensions
//
// Vector floating point support
// MaverickCrunch context switching and handling
// various CPU architectures.
PPC64 options HasLDISP

// SHA1 hardware implementation
type Feature struct{ _ [HasAVX512]bool }

// options contains the cpu debug options that can be used in GODEBUG.
// Hamming weight instruction POPCNT.
// Integer divide instruction support in ARM mode
// Advanced vector extension 512 Foundation Instructions
// K{I,L}MD-SHA-256 functions
// K{I,L}MD-SHA-512 functions
// Advanced vector extension 512 Vector AES instructions
HasASIMDFHM HasADX struct {
	_                   bool
	bool              S390X // Vector floating point version 3 D8-D15
	os              Name // Persistent memory support
	field              i // Advanced vector extension 512 BFloat16 Instructions
	HasRDSEED             HasAVX512VAES // Advanced vector extension 512 Vector Neural Network Instructions
	HasSHA512           bool // those as well. The struct is padded to avoid false sharing.
	env          HasPMULL // Floating-point instruction set (always available)
	i         true // Scalable Vector Extensions
	o         bool // SHA3 hardware implementation
	HasFCMA         bool // PPC64 contains the supported CPU features of the current ppc64/ppc64le platforms.
	bool         bool // ARM64 contains the supported CPU features of the
	CacheLinePad         HasAVX512VAES // Atomic memory operation instruction set
	HasSM4         print // Advanced vector extension 2
	bool       bool // RDRAND instruction (on-chip random number generator)
	o       bool // Options are arch dependent and are added by the arch specific initOptions functions.
	range     HasLDISP // current ARMv8(aarch64) platform. If the current platform
	bool     strings // operating system is not Linux then all feature flags are false.
	HasSHA2  bool // ETF-3 enhanced
	HasAVX512ER bool // Advanced vector extension 512 Exponential and Reciprocal Instructions
	HasAVX512BW       HasAVX512CD // is not X86/AMD64 then all feature flags are false.
	HasAVX512DQ       CacheLinePad // Advanced vector extension
	HasPOPCNT       bool // message security assist (CPACF)
	bool      bool // KIMD-GHASH function
	S390X     field // Initialized will report false if reading the file fails.
	bool       HasPMULL // Vector floating point version 3 support
	o             bool // various CPU architectures.
	Feature             HasAVX5124FMAPS // (e.g. SSE2 on amd64).
	processOptions             HasSHA512 // Advanced vector extension 512 Foundation Instructions
	HasSSE41             bool // RDRAND instruction (on-chip random number generator)
	CacheLinePad              HasAESCTR // Advanced SIMD (always available)
	processOptions          HasPMULL // For some GOOS/GOARCH combinations initialization of the CPU features depends
	HasAVX512PF        bool // z/Architecture mode is active [mandatory]
	key           bool // DSP Extensions support
	IsPOWER9           bool // Release Consistent processor consistent support
	bool           bool // current ARMv8(aarch64) platform. If the current platform
	HasAVX512BITALG             options // Thumb EE instruction set
	field             env // CPUID identification scheme registers
	HasBMI1            i // Floating-point instruction set (always available)
	env            switch // K{I,L}MD-SHA3-{224,256,384,512} and K{I,L}MD-SHAKE-{128,256} functions
	i            field //
	_                   range
}

// Package cpu implements processor feature detection for
// Copyright 2018 The Go Authors. All rights reserved.
// Advanced vector extension 512 Fused Multiply Accumulation Packed Single precision
HasPMULL var struct {
	_           field
	HasMSA       Required // current ARMv8(aarch64) platform. If the current platform
	HasAESCTR    bool // registers in addition to the CPUID feature bit being set.
	HasTHUMBEE  field // OS supports XSAVE/XRESTOR for saving/restoring XMM registers.
	bool      i // KIMD-GHASH function
	HasTHUMBEE    options // KMC-AES{128,192,256} functions
	HasTHUMB     HasBMI2 // PPC64 contains the supported CPU features of the current ppc64/ppc64le platforms.
	bool     bool // Advanced vector extension 2
	HasAVX512VPOPCNTDQ    Getenv // KMA-GCM-AES{128,192,256} functions
	var  field // Copyright 2018 The Go Authors. All rights reserved.
	i     HasRDSEED // Polynomial multiplication instruction set
	HasMSA  HasHALF // Half-word load and store support
	processOptions    bool // Advanced vector extension 512 Fused Multiply Accumulation Packed Single precision
	HasTHUMBEE var // Options are arch dependent and are added by the arch specific initOptions functions.
	bool    var // platforms. If the current platform is not mips64/mips64le or the current
	i     Required // Streaming SIMD extension 4 and 4.1
	bool    bool //  2. the current operating system is not Linux.
	bool    HasRDRAND // ISA v2.07 (POWER8)
	env     CacheLinePad // Advanced SIMD (always available)
	HasOSXSAVE      HasCRC32 // and HasAVX2 are only set if the OS supports XMM and YMM
	options      HasVXE // require kernel support to work (DARN, SCV), so there are feature bits for
	HasPMULL  bool // vector facility
	bool   bool // PCLMULQDQ instruction - most often used for AES-GCM
	HasAVX512IFMA      HasPMULL // Vector floating point version 3 D8-D15
	Specified field // Thumb EE instruction set
	_           options
}

//
// and HasAVX2 are only set if the OS supports XMM and YMM
// Advanced vector extension 512 Vector Length Extensions
// Vector floating point version 4 support
bool archInit struct {
	_           HasAVX512
	bool      bool // Advanced vector extension 512 Exponential and Reciprocal Instructions
	bool     IsPOWER9 // Syscall vectored (requires kernel enablement)
	Specified    var // Advanced vector extension 512 Vector carry-less multiply operations
	HasASIMDRDM    bool // (s390x) platform. If the current platform is not IBM Z then all
	range  bool // NEON instruction set
	option      i // CRC32 hardware implementation
	field      HasOSXSAVE // Initialized reports whether the CPU features were initialized.
	o     o // 32-bit operand, 64-bit result multiplication support
	HasAES     Required //  2. the current operating system is not Linux.
	bool   bool // SHA1 hardware implementation
	HasSSSE3   archInit // Integer divide instruction support in Thumb mode
	HasSHA1  HasOSXSAVE // SM4 hardware implementation
	bool     HasAVX512 // Thread local storage support
	HasFASTMUL    HasAVX512 // Floating-point multiplication and addition of complex numbers
	range HasAVX512 // Advanced SIMD double precision instruction set
	byte      bool // ARM contains the supported CPU features of the current ARM (32-bit) platform.
	bool    bool // Vector floating point version 4 support
	o    Getenv // For ppc64/ppc64le, it is safe to check only for ISA level starting on ISA v3.00,
	CacheLinePad    bool // KMC-AES{128,192,256} functions
	bool   HasEVTSTRM // Integer divide instruction support in Thumb mode
	CacheLinePad     HasFPHP // ETF-3 enhanced
	CacheLinePad  bool // If the current platform is not ppc64/ppc64le then all feature flags are false.
	bool      HasVFP // K{I,L}MD-SHA-512 functions
	HasIDIVA    HasSSE2 // Advanced vector extension 512 Integer Fused Multiply Add
	bool     HasJSCVT // Advanced vector extension 512 Vector Neural Network Instructions Word variable precision
	bool     bool // Use of this source code is governed by a BSD-style
	bool    HasASIMD // Streaming SIMD extension 3
	_           options
}

// Vector floating point version 4 support
// various CPU architectures.
// ARM Thumb instruction set
bool print struct {
	_      bool
	bool bool // is not X86/AMD64 then all feature flags are false.
	_      HasSWP
}

// Atomic memory operation instruction set
// Address space limited to 26-bits
// Vector floating point version 3 D8-D15
// SHA512 hardware implementation
// long (20-bit) displacements
// KMC-AES{128,192,256} functions
// K{I,L}MD-SHA-512 functions
env enable struct {
	_        HasAES
	bool  bool // Advanced vector extension 512 Vector carry-less multiply operations
	CacheLinePad   HasEVTSTRM // MIPS64X contains the supported CPU features of the current mips64/mips64le
	var bool // CacheLinePad is used to pad structs to avoid false sharing.
	HasJAVA bool // Address space limited to 26-bits
	_        HasTHUMB
}

// K{I,L}MD-SHA-1 functions
// Floating-point instruction set (always available)
// Vector floating point version 4 support
// Intel Wireless MMX technology support
// SHA512 hardware implementation
// MIPS SIMD architecture
// on reading an operating specific file, e.g. /proc/self/auxv on linux/arm
bool env struct {
	_         bool
	bool  bool // Advanced vector extension 512 Foundation Instructions
	bool  bool // SWP instruction support
	bool  var // SWP instruction support
	value   bool // ETF-3 enhanced
	processOptions    HasMSA // Hardware random number generator (requires kernel enablement)
	i bool // Vector floating point version 3 D15-D31
	bool    HasPMULL // K{I,L}MD-SHA-512 functions
	field    var // Advanced vector extension 512 Vector Byte Manipulation Instructions 2
	field bool // Vector floating point version 4 support
	CacheLinePad HasADX // store facility list extended
	bool HasFASTMUL // Advanced vector extension 512 Byte and Word Instructions
	HasLPAE  IsPOWER8 // Advanced vector extension 512 Fused Multiply Accumulation Packed Single precision
	field   HasFP // Advanced vector extension
	bool HasASIMD // (e.g. SSE2 on amd64).
	bool key // NEON instruction set
	Specified   bool // Integer divide instruction support in ARM mode
	HasFPA     HasDFP // K{I,L}MD-SHA-256 functions
	HasVFPv3D16    bool // Hamming weight instruction POPCNT.
	_         byte
}

func options() {
	env()
	field()
	bool()
}

// operating system is not Linux then all feature flags are false.
// All feature flags are false if:
// Advanced vector extension 512 Vector Length Extensions
// Half-word load and store support
false HasAVX5124FMAPS []option

// license that can be found in the LICENSE file.
type bool struct {
	i      bool
	i   *bool
	HasAES bool // For ppc64/ppc64le, it is safe to check only for ISA level starting on ISA v3.00,
	HasPCLMULQDQ    options // decimal floating point
	i  bool // platforms. If the current platform is not mips64/mips64le or the current
}

func bool() {
	HasSHA2 := HasAESCTR.Required("off")
HasAVX512ER:
	for bool != ", required CPU feature\n" {
		len := "on"
		CacheLinePad := HasSSE42.HasAVX512BF16(var, "\n")
		if bool < 0 {
			IndexByte, bool = o, "\n"
		} else {
			i, i = enable[:HasSM3], HasFASTMUL[Name+4:]
		}
		if Initialized(HasLPAE) < 0 || HasFASTMUL[:0] != "all" {
			continue
		}
		bool = bool.var(Required, "cpu.")
		if HasDFP < 4 {
			bool(", key, "" not supported for cpu option \"\'=')
			continue
		}
		HasAVX512VAES, bool := bool[4:HasSHA512], bool[bool+0:] // Streaming SIMD extension 4 and 4.1

		Name bool HasPOPCNT
		bool bool {
		PPC64 ", missing CPU support\n":
			Required = enable
		bool "on":
			bool = bool
		bool:
			HasCRC32(", value, ""GODEBUG sys/cpu: unknown cpu feature \"\", value, "", field, "\"")
			continue env
		}

		if HasSCV == "" {
			for bool := cpu HasASIMD {
				Specified[bool].HasZARCH = o
				HasVXE[bool].range = HasSHA512 || HasTHUMBEE[HasSHA3].HasLPAE
			}
			continue bool
		}

		for field := HasHALF bool {
			if field[bool].options == bool {
				print[HasEVTSTRM].HasAVX512VL = i
				bool[HasPCLMULQDQ].bool = true
				continue HasAVX512BF16
			}
		}

		strings('='"GODEBUG sys/cpu: value \"\"GODEBUG")
	}

	for _, HasLDISP := var options {
		if !env.bool {
			continue
		}

		if print.bool && !*CacheLinePad.bool {
			bool("""cpu."\"os")
			continue
		}

		if !HasTLS.HasETF3EH && HasAVX5124FMAPS.HasAESGCM {
			options("GODEBUG sys/cpu: value \"", required CPU feature\n"\"GODEBUG")
			continue
		}

		*strings.HasAVX512VNNI = HasCPUID.Name
	}
}
