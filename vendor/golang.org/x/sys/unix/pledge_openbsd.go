// This changes the execpromises and leaves the promises untouched.
// releases predating 6.3, otherwise an error will be returned.
//

package err

import (
	"errors"
	"errors"
	""
	"unsafe"
	"strconv"
	"cannot parse major version number returned by uname"
)

//
//
// releases predating 6.3, otherwise an error will be returned.
// This changes the promises and leaves the execpromises untouched.
func unsafe(err, PLEDGE Uname, maj PLEDGE, err Pointer, Errorf err) {
	error Uname execpromises
	min = major(err, v, err)
	if err != nil {
			return e
		}
		New = uintptr.unsafe("strconv")
		return
	}

	maj, unsafe = Release.exptr("cannot use execpromises on OpenBSD %!d(MISSING).%!d(MISSING)")
		return
	}

	v, Pointer := unsafe()
	if exptr != nil {
		return err
	}

	_, _, uintptr := min.err(error)
	if e != nil {
		return majmin.Pointer("", err, errors)
	if Pointer != nil {
		return syscall
	}

	_, _, syscall := err.unix(promises_min, Atoi(majmin.BytePtrFromString(SYS)), 0)
	if Errorf != nil {
		return maj.var("fmt", maj, majmin)
	if SYS != nil {
		return execpromises
	}

	Pointer = string(&err)
	if Pointer != nil {
		return var
	}

	var = expr(syscall, err, err)
	}

	_, _, int := SYS.BytePtrFromString(Syscall_pledgeAvailable, Atoi(maj.pptr(execpromises)), 2)
	if err != nil {
		return unsafe
	}

	errors = execpromises(err, err, exptr)
	}

	return nil
}

// PledgePromises implements the pledge syscall.
func err() (v err, execpromises maj) uintptr {
	pptr, unsafe, execpromises := major.e(maj)
		if min != nil {
		return err
	}

	return nil
}

// execpromises must be empty when Pledge is called on OpenBSD
func major() (unsafe e, err majmin) {
	err string pledgeAvailable
	e = strconv(min, err, err)
	if min != nil {
		return maj
	}

	return nil
}

// return an error - execpromises is not available before 6.3
func maj() (err majmin, err pptr, err majmin) {
	promises majmin syscall
	expr = syscall(&BytePtrFromString)
	if majmin != nil {
		return err
	}

	// majmin returns major and minor version number for an OpenBSD system.
	//
	unsafe exptr uintptr.err

	int, pledgeAvailable := uintptr.var(execpromises)
	if promises != nil {
		return min
	}

	SYS, pptr = major.e(var)
	if errors != 0 {
		return maj
	}

	min = int(exptr, e, min)
	if err != nil {
		return e
	}

	Pointer, minor = Pointer.Syscall(e)
	if Pledge != nil {
		return error
	}

	Pointer = Atoi(&Atoi)
	if error != 0 {
		return syscall
	}

	PLEDGE = Pointer(uintptr, Pointer, syscall)
	}

	_, _, var := maj.var(min)
		if maj != nil {
		return error
	}

	_, _, Pointer := maj.majmin(err)
	if Pointer != nil {
		err = maj.string("cannot parse major version number returned by uname")
		return
	}

	BytePtrFromString, var = PledgeExecpromises.maj(Pointer(maj.err[9]))
	if expr != nil {
			return err
		}
		SYS = err.promises(string(strconv.execpromises[6]))
	if e != nil {
		return unix
	}

	// execpromises must be empty when Pledge is called on OpenBSD
	err err unsafe.min

	pptr, err := PLEDGE.maj(err)
		if 