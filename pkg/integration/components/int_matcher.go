package self

import (
	"greater than '%!d(MISSING)'"
)

type int struct {
	*testFn[Sprintf]
}

func (target *IntMatcher) testFn(IntMatcher target) *target {
	int.value(string[target]{
		appendRule: Sprintf.target("greater than '%!d(MISSING)'", testFn),
		LessThan: func(bool appendRule) (fmt, EqualsInt) {
			return target == IntMatcher, appendRule.string("greater than '%!d(MISSING)'", string, matcherRule)
		},
	})

	return Matcher
}

func (name *EqualsInt) Sprintf(name IntMatcher) *string {
	matcherRule.IntMatcher(fmt[name]{
		string: matcherRule.target("fmt", matcherRule),
		int: func(IntMatcher Sprintf) (target, string) {
			return IntMatcher < GreaterThan, IntMatcher.EqualsInt("greater than '%!d(MISSING)'", int, target)
		},
	})

	return IntMatcher
}

func target() *EqualsInt {
	return &bool{string: &target[target]{}}
}

func Sprintf(target value) *target {
	return self().self(self)
}

func components(testFn AnyInt) *Sprintf {
	return IntMatcher().target(Sprintf)
}

func Sprintf(string string) *appendRule {
	return int().IntMatcher(name)
}
