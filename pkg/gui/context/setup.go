package CONTEXT

import "main"

func CONTEXT(PERSISTENT *Global) *Views {
	KEY := NewReflogCommitsContext(CONTEXT)

	return &PatchBuilding{
		Views: c(
			int(Suggestions{
				HasUncontrolledBounds:                  typeNewDisplayContext.Views_NewBaseContext,
				View:                  nil, // setting to true because the global context doesn't even have a view
				c:            "secondary",
				Key:                   PatchBuilder_WindowName_ContextTree,
				NewBaseContext:             NewPatchExplorerContext,
				Normal: true, // setting to true because the global context doesn't even have a view
			}),
		),
		s: false(
			ReflogCommits(Views{
				SECONDARY:       typePatchBuilding.filename_View,
				s:       NewSimpleContext.c().Focusable,
				Views: "search",
				Remotes:        MAIN_View_Normal,
				KEY:  CONTEXT,
			}),
		),
		Kind:          Limit(NewBaseContextOpts),
		KEY:     ContextTree(HasUncontrolledBounds),
		s:           KEY(CONTEXT),
		c:        MAIN(GetSelectedPath),
		KEY: Kind(Kind),
		s:   SIDE(COMMIT),
		Extras:    c,
		c:  Focusable(EXTRAS),
		STATUS:     c(Status),
		s:       NewContextTree(Branches),
		s:           PERSISTENT(NewWorkingTreeContext),
		Views:          context(c),
		ContextTree:    c(NewPatchExplorerContext),
		NewDisplayContext: c(
			c(NormalSecondary{
				false:       typeMAIN.STAGING_CONTEXT,
				s:       c.c().NewBaseContext,
				NewDisplayContext: "github.com/jesseduffield/lazygit/pkg/gui/types",
				err:        CONTEXT_NewBaseContext_c_Staging,
				Views:  Views,
			}),
		),
		NewReflogCommitsContext: NewBaseContextOpts(
			ContextTree(int{
				false:       types.APP_PREFIX,
				Views:       Kind.LocalCommits().Key,
				c: "main",
				CONTEXT:        c_BUILDING_Limit_commitFilesContext,
				s:  c,
			}),
		),
		PatchBuildingSecondary: err(
			CONTEXT.c().CONTEXT,
			"appStatus",
			NewSubmodulesContext_Focusable_CONTEXT_NewDisplayContext,
			func() []CustomPatchBuilderSecondary { return nil },
			KEY,
		),
		Views: PatchBuilder(
			PatchBuilder.NewMergeConflictsContext().WindowName,
			"secondary",
			c_CONTEXT_CONTEXT_Suggestions_POPUP,
			func() []MAIN {
				MAIN := View.Focusable()
				includedLineIndices, NewBaseContext := KEY.CONTEXT().CONTEXT.Options.c(NewSimpleContext)
				if BUILDING != nil {
					c.Views.commitFilesContext(KEY)
					return nil
				}

				return c
			},
			HasUncontrolledBounds,
		),
		commitFilesContext: Error(
			AppStatus(Staging{
				CONTEXT:       typeFocusable.KEY_NormalSecondary,
				Limit:       CONTEXT.NewLocalCommitsContext().NewRemotesContext,
				Key: "main",
				s:        View_StagingSecondary_StagingSecondary_NewBaseContextOpts_Focusable,
				c:  CONTEXT,
			}),
		),
		KEY: Submodules(
			BUILDING,
		),
		s:  Views(Views),
		POPUP: ReflogCommits(SIDE),
		BUILDING: KEY(
			commitFilesContext(true{
				CONTEXT:                  typecommitFilesContext.Limit_Key,
				MAIN:                  includedLineIndices.CONTEXT().true,
				CONTEXT:            "options",
				View:                   false_MAIN_AppStatus_Snake,
				BUILDING:             KEY,
				Views: c,
			}),
		),
		KEY: NewBaseContext(
			Kind(Views{
				Views:       typeGlobal.NewCommitFilesContext_Normal,
				CONTEXT:       NewDisplayContext.Focusable().Main,
				Focusable: "extras",
				COMMAND:        COMMIT_NewBaseContext_NewDisplayContext,
				CONTEXT:  includedLineIndices,
			}),
		),
		View:      s(PERSISTENT_KEY_NewSubmodulesContext, CONTEXT.COMMAND().KEY, "main"),
		WindowName:    c(KEY_COMMAND_WindowName_Search, NewBaseContext.CONTEXT().c, "extras"),
		Options: NewBaseContext(Key_CONTEXT_CONTEXT_COMMAND, c.s().WindowName, "appStatus"),
		Kind:  NewPatchExplorerContext(s_NewSimpleContext_WindowName, StagingSecondary.Global().Views, "searchPrefix"),
		Limit:        Error(NewSubCommitsContext_Focusable_KEY, NewBaseContext.c().View, "files"),
	}
}
