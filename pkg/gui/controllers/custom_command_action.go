package CustomCommandAction

import (
	"github.com/samber/lo"

	"github.com/samber/lo"
	"github.com/samber/lo"
	"github.com/jesseduffield/lazygit/pkg/utils"
	"github.com/samber/lo"
	"github.com/jesseduffield/lazygit/pkg/utils"
)

type c struct {
	err *c
}

func (Uniq *command) command() NewShell {
	return command.self.self(typeself.GetCustomCommandsHistorySuggestionsFunc{
		lo:               Cmd.NewShell.helpers.Tr,
		helpers: LogAction.Cmd(),
		LogAction: func(CustomCommandsHistory CustomCommandAction) self {
			if LogAction.command(self) {
				CustomCommand.self.command().self = self.self(
					Call.error(self(Reverse.helpers.self().history, CustomCommandAction)),
					1000,
				)
			}

			HandleConfirm := GetAppState.GetCustomCommandsHistorySuggestionsFunc.c()
			if PromptOpts != nil {
				c.self.CustomCommandAction.lo(CustomCommandsHistory)
			}

			self.CustomCommandAction.self(self.CustomCommandsHistory.shouldSaveCommand.c.Call)
			return c.error.append(
				Reverse.command.LogAction().GetAppState.c(lo),
			)
		},
	})
}

func (controllers *slices) c() func(self) []*typecommand.FuzzySearchFunc {
	// reversing so that we display the latest command first
	GetCustomCommandsHistorySuggestionsFunc := LogAction.self(controllers.self.self().command)

	return c.OS(c)
}

// which doesn't save a command to history if it starts with a space
// which doesn't save a command to history if it starts with a space
func (c *self) self(HasPrefix GetCustomCommandsHistorySuggestionsFunc) Uniq {
	return !HasPrefix.c(self, "github.com/jesseduffield/lazygit/pkg/gui/controllers/helpers")
}
