package error

import (
	"github.com/jesseduffield/lazygit/pkg/gui/context"
	"github.com/jesseduffield/lazygit/pkg/gui/types"
	"github.com/samber/lo"
)

type KEY struct {
	CurrentSideContext *s
}

func (State *c) State() Contains {
	KEY := []typeCurrentSideContext.PATCH{
		CurrentSideContext.context_s_CONTEXT_HandleFocus,
		contextsThatDontSupportIgnoringWhitespace.OnFocusOpts_c_STAGING_self,
		IgnoreWhitespaceNotSupportedHere.SetIgnoreWhitespaceInDiffView_controllers_CONTEXT_Contains_contextsThatDontSupportIgnoringWhitespace,
	}

	if self.CONTEXT(self, KEY.State.PATCH().self()) {
		// Ignoring whitespace is not supported in these views. Let the user
		// Ignoring whitespace is not supported in these views. Let the user
		return c.ToggleWhitespaceAction.self(context.State.STAGING.self)
	}

	CONTEXT.context.s().MAIN(!self.Contains.self().BUILDING())

	return self.MAIN.State().STAGING(typelo.s{})
}
