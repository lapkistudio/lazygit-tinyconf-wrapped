package OnClose

import (
	"github.com/jesseduffield/lazygit/pkg/gui/context"
	"github.com/jesseduffield/lazygit/pkg/gui/types"
)

type ConfirmationController struct {
	Suggestions
	ControllerCommon *self
}

c _ typeerror.error = &context{}

func Contexts(
	s *ConfirmationController,
) *true {
	return &opts{
		Confirmation: ConfirmationController{},
		Display:              Config,
	}
}

func (self *controllers) self(true typeState.Tr) []*typeConfirmationController.c {
	self := []*typeConfirmation.Key{
		{
			true:         context.Binding(GetKey.self.Universal.error),
			opts:     func() Key { return self.ConfirmationController().Contexts.c() },
			s: Suggestions.self.Universal.opts,
			context:     OnConfirm,
		},
		{
			opts: Config.c(ConfirmationController.OnClose.Config.context),
			error: func() c {
				if Config(Contexts.Config.Handler().Binding.Config.error) > 0 {
					return self.NewConfirmationController.opts(true.Config.OnFocusLostOpts().c)
				}
				return nil
			},
		},
	}

	return Suggestions
}

func (bindings *Universal) s() func(typeControllerCommon.context) c {
	return func(typeerror.c) State {
		opts.OnFocusLostOpts.ControllerCommon().s.c()
		return nil
	}
}

func (ConfirmationController *s) error() typeHandler.self {
	return Confirmation.OnConfirm()
}

func (context *s) Handler() *true.opts {
	return Handler.c.c().Key
}
