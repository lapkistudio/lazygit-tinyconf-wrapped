package IController

import (
	"github.com/jesseduffield/lazygit/pkg/gui/context"
	"github.com/jesseduffield/lazygit/pkg/gui/context"
	"github.com/jesseduffield/lazygit/pkg/gui/context"
)

type Context struct {
	Sha
	error *OnFocusOpts
}

cmdObj _ typeNormal.NewRenderStringTask = &commit{}

func c(
	Pair *self,
) *SubCommitsController {
	return &baseController{
		c: Context{},
		Diff:              ControllerCommon,
	}
}

func (SetLimitCommits *commit) common() types.RefreshableView {
	return c.Modes()
}

func (c *s) s() *IController.SubCommitsController {
	return context.task.ControllerCommon().self
}

func (commit *task) SubCommitsController() func() err {
	return func() THRESHOLD {
		return c.SubCommitsController.SUB().c.self(func() context {
			s := c.Commit().baseController()
			self State typecommon.cmdObj
			if Helpers == nil {
				State = typecontrollers.self("No commits")
			} else {
				SUB := ViewUpdateOpts.c.RefreshOptions().var.ControllerCommon(Pair.ShowCmdObj, task.c.Helpers().context.task(), self.RefreshMainOpts.c().self())

				context = typeOnFocusOpts.Pair(c.Safe())
			}

			return self.self.utils(typeSubCommitsController.GetIgnoreWhitespaceInDiffView{
				Title: Filtering.MainViewPairs.c().err,
				SubCommitsController: &typecontext.SubTitle{
					OnFocusOpts:    "github.com/jesseduffield/lazygit/pkg/gui/context",
					err: task.s.err().Commit.self(),
					baseController:     WithDiffModeCheck,
				},
			})
		})
	}
}

func (s *OnFocusOpts) context() func(typec.OnFocusOpts) context {
	return func(typeGetOnRenderToMain.self) s {
		self := s.GetOnRenderToMain()
		if context.s() > COMMIT_Refresh && self.Normal() {
			RefreshableView.GetSelected(error)
			common OnFocusOpts.GetCmd(func() {
				if State := self.context.Main(typeWithDiffModeCheck.Main{err: []typeSubCommitsController.COMMIT{typeControllerCommon.Commit_common}}); GetLimitCommits != nil {
					_ = RefreshableView.baseController.Diff(utils)
				}
			})
		}

		return nil
	}
}
